.PHONY: clean test

all: %DESTDIR%/libfoo%SO%

%DESTDIR%/libfoo%SO%: src/libfoo%O%
	%LD% %LDSHARED% %LDFLAGS% %LIBS% %LDOUT% %DESTDIR%/libfoo%SO% src/libfoo%O%

src/libfoo%O%: src/libfoo.c
	%CC% -c %CCSHARED% %CCFLAGS% %CCOUT% src/libfoo%O% src/libfoo.c

test: %DESTDIR%/libfoo%SO%
	prove t

clean:
	-rm src/libfoo%O% %DESTDIR%/libfoo%SO%
